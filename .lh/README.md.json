{
  "sourceFile": "README.md",
  "activeCommit": 0,
  "commits": [
    {
      "activePatchIndex": 0,
      "patches": [
        {
          "date": 1758642289491,
          "content": "Index: \n===================================================================\n--- \n+++ \n"
        }
      ],
      "date": 1758642289491,
      "name": "Commit-0",
      "content": "# zod-to-from\n\n<!-- automd:badges color=yellow -->\n\n[![npm version](https://img.shields.io/npm/v/zod-to-from?color=yellow)](https://npmjs.com/package/zod-to-from)\n[![npm downloads](https://img.shields.io/npm/dm/zod-to-from?color=yellow)](https://npm.chart.dev/zod-to-from)\n\n<!-- /automd -->\n\nA collection of to/from adapters that convert between I/O formats and Zod-validated objects. The library is designed with a \"one schema in the middle, many edges around it\" philosophy, providing a schema-centric I/O hub for JavaScript. It is a build-less, ESM-only library using `.mjs` files with JSDoc for type safety.\n\n### âœ¨ Features\n\n  * **Schema-Centric:** Uses a single Zod schema as the central contract for all I/O operations.\n  * **Massive Converter Catalog:** Supports a wide range of formats through optional packs, including Office documents, data analytics formats, config files, and knowledge graphs.\n  * **Symmetric API:** Provides a simple and symmetrical API with three core functions: `parseFrom`, `formatTo`, and `convert`.\n  * **Deterministic Outputs:** Enforces deterministic I/O with stable key ordering and consistent formatting policies for dates and numbers.\n  * **Buildless by Design:** Uses `.mjs` and JSDoc to ensure a build-free, portable runtime that works in Node, Deno, and edge environments.\n  * **Optional AI Adapters:** Can leverage the Vercel AI SDK and Ollama to normalize \"messy\" formats like Office documents into a structured schema.\n  * **First-Class RDF/Turtle Support:** Treats Turtle as a universal Intermediate Representation (IR), unlocking capabilities for knowledge-driven automation, governance, and provenance.\n  * **Monorepo Structure:** Organized as a pnpm workspace with a small core library and optional packs for different format categories.\n\n### ðŸš€ Quick Start\n\n**1. Installation**\n\n```bash\n# Install the core library and zod\nnpm i zod-to-from zod\n\n# Install optional packs as needed\nnpm i ztf-pack-office ztf-pack-data ztf-pack-graph\n```\n\n**2. Usage**\n\n```javascript\nimport { z } from 'zod';\nimport { convert, parseFrom, formatTo } from 'zod-to-from';\n\n// 1) Define your Zod schema\nconst Config = z.object({\n  host: z.string(),\n  port: z.number().int().positive(),\n  debug: z.boolean().default(false)\n});\n\n// 2) Parse from a format (e.g., YAML) into a validated object\nconst obj = await parseFrom(Config, 'yaml', `\nhost: api.example.com\nport: 8443\ndebug: true\n`);\n\n// 3) Format the object into another format (e.g., TOML)\nconst toml = await formatTo(Config, 'toml', obj);\n\n// 4) Convert between formats in a single step\nconst toml2 = await convert(Config, { from: 'yaml', to: 'toml' }, `\nhost: api.example.com\nport: 8443\n`);\n```\n\n### ðŸ“¦ API\n\n  * `parseFrom(schema, format, input, opts?)`: Parses input from a specified format into a Zod-validated object.\n  * `formatTo(schema, format, data, opts?)`: Formats a validated object into the specified output format.\n  * `convert(schema, { from, to }, input, opts?)`: A one-shot function to convert from an input format to an output format.\n  * `registerAdapter(name, adapter)`: Allows for adding custom format converters at runtime.\n  * `listAdapters()`: Returns a list of available adapters.\n\n### ðŸ“š Converter Packs (The 80/20 \"Dark Matter\")\n\nZTF covers the \"dark matter\" of heterogeneous I/O formats through a series of optional packs.\n\n| Pack | Formats | Shape |\n| --- | --- | --- |\n| **Office & Exec Outputs** | `docx-table`, `pptx-slides`, `xlsx`, `pdf-table`, `md`, `html`, `csv` | doc, table |\n| **Data & Analytics** | `json`, `ndjson`, `parquet`, `arrow`, `avro`, `protobuf`, `sqlite` | tree, records, table |\n| **Graph & Knowledge** | `ttl`, `nq`, `jsonld`, `plantuml`, `mermaid`, `openapi`, `jsonschema` | graph, diagram |\n| **DevOps & Config** | `yaml`, `toml`, `ini`, `env`, `dockerfile`, `compose`, `k8s` | tree, records |\n| **Nunjucks** | `njk`, `md`, `html`, `puml`, `ttl`, `frontmatter` (parse) | doc |\n| **Communications** | `ics`, `vcard`, `eml`, `msgpack`, `har`, `curl` | calendar, contact, message |\n| **Media & Meta** | `exif`, `id3`, `base64`, `zip`, `tar`, `pdf-text` | tree, blob, doc |\n| **Geo & Time** | `geojson`, `topojson`, `kml`, `gpx`, `wkt` | tree |\n\n### ðŸ¤– AI-Assisted Adapters\n\nFor \"messy\" formats with implicit structure, ZTF provides optional AI-powered adapters.\n\n  * **`office-ai` Pack:** Uses the Vercel AI SDK and Ollama to parse formats like `.docx`, `.pptx`, and `.xlsx` by extracting their content and normalizing it into a target Zod schema.\n  * **Ingestion Only:** This AI-powered normalization is used only for `parseFrom` operations. The `formatTo` operation for creating documents remains deterministic.\n  * **Provenance:** Outputs from AI adapters are tagged with metadata, such as the LLM model used, for auditability.\n\n### ðŸ”§ CLI (Optional)\n\nZTF includes an optional CLI for command-line conversions.\n\n```bash\n# Parse a YAML file into a JSON object\nnpx ztf parse --schema ./schemas/config.mjs#Config --from yaml --in config.yaml --out config.json\n\n# Format a JSON object into a TOML file\nnpx ztf format --schema ./schemas/config.mjs#Config --to toml --in config.json --out config.toml\n\n# Convert a CSV file directly to an XLSX spreadsheet\nnpx ztf convert --schema ./schemas/report.mjs#Report[] --from csv --to xlsx --in data.csv --out out.xlsx\n```\n\n## Usage\n\nInstall the package:\n\n```sh\n# âœ¨ Auto-detect (supports npm, yarn, pnpm, deno and bun)\nnpx nypm install zod-to-from\n```\n\nImport:\n\n<!-- automd:jsimport cdn name=\"zod-to-from\" -->\n\n**ESM** (Node.js, Bun, Deno)\n\n```js\nimport { parseFrom, formatTo, convert } from \"zod-to-from\";\n```\n\n**CDN** (Deno, Bun and Browsers)\n\n```js\nimport { parseFrom, formatTo, convert } from \"https://esm.sh/zod-to-from\";\n```\n\n<!-- /automd -->\n\n## Development\n\n<details>\n\n<summary>local development</summary>\n\n- Clone this repository\n- Install latest LTS version of [Node.js](https://nodejs.org/en/)\n- Enable [Corepack](https://github.com/nodejs/corepack) using `corepack enable`\n- Install dependencies using `pnpm install`\n- Run interactive tests using `pnpm dev`\n\n</details>\n\n## License\n\n<!-- automd:contributors license=MIT -->\n\nPublished under the [MIT](https://github.com/unjs/zod-to-from/blob/main/LICENSE) license.\nMade by [community](https://github.com/unjs/zod-to-from/graphs/contributors) ðŸ’›\n<br><br>\n<a href=\"https://github.com/unjs/zod-to-from/graphs/contributors\">\n<img src=\"https://contrib.rocks/image?repo=unjs/zod-to-from\" />\n</a>\n\n<!-- /automd -->\n\n<!-- automd:with-automd -->\n\n---\n\n_ðŸ¤– auto updated with [automd](https://automd.unjs.io)_\n\n<!-- /automd -->\n"
    }
  ]
}
